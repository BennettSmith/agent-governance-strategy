<!--
Generated by agent-gov. Edits inside managed blocks may be overwritten by sync.
Local addenda below is project-owned and will not be overwritten.
-->
<!-- GOV:BEGIN id=doc-non-negotiables version=HEAD sha256=b3cb463136d77b84357e1de558a9624b0d79b4f6f3bf5d12eb24b32578dffdc3 sourceRepo=/Users/bsmith/Developer/github.com/BennettSmith/agent-governance-strategy sourceRef=HEAD sourceCommit=b91043670a8e9629bf9496ee651815d1b7e8725e -->

## Quality gates (core)

- Tests must be written before production code.
- Code coverage must remain above 85%.
- Generated code (openapi) is not tested.
- Generated code (openapi) is excluded from code coverage requirement.
- `make ci` must pass with no failures.
- Quality gates must pass for a task to be considered complete.

## Legacy & refactoring (core)

- A change is a **refactor** only if it makes **no externally observable behavior change** at defined boundaries (persistence contracts, API interactions, user-visible UI behavior, and any other profile-defined external boundary).
- Refactors must **not** be mixed with behavior changes (features/fixes) in the same branch or pull request. If both are needed, do the refactor first, then do the behavior change as a separate step.
- Before changing legacy internals, preserve current behavior with a **safety net** (characterization tests, contract tests, or golden-master tests) at the relevant boundary.
- Refactoring steps must be **small and reversible**. Each step must:
  - keep the prior behavior intact
  - pass all quality gates
  - be trivially revertible (small diff, or guarded by a flag, or a parallel-change/expand-contract approach where the old path remains available until cutover)
- New code introduced during refactoring must follow the target architecture; legacy code may remain only when **isolated behind explicit boundaries** (seams/adapters/facades/boundaries) so violations do not spread.
- Follow `Docs/Refactoring/Legacy-Refactoring-Playbook.md` for approved legacy refactoring patterns and checklists.

## Agents (core)

- Agents must follow the architecture for the target profile.
- All changes must be made in feature branches.
- Agents must execute work as small, reviewable checkpoints aligned to the branch plan; agents must request explicit human approval at each checkpoint before creating a checkpoint commit.
- Agents must request human acceptance before checkpoint commits.
- Agents must not mark plan tasks complete without approval.
- Agents must keep the branch plan up to date throughout execution; after each approved checkpoint, agents must immediately update the plan to reflect progress (e.g., check off the checkpoint and record relevant commit/PR references) before proceeding.
- After an approved task is complete, agents must update the branch plan to reflect completion (e.g., set `status: completed`, check off completed checkpoints and quality gates, and add PR/commit references) before declaring the work “done” or pushing final updates.
- As part of the final checkpoint (before the final PR wrap-up commit), agents must ensure the pull/merge request has a meaningful markdown description and must set/update it, then verify it was applied correctly.
- Before creating the final PR wrap-up commit, agents must re-run quality gates, update the branch plan to `status: completed` (with checkpoint/quality-gate checkmarks and PR/commit references), then request explicit human approval using: `APPROVAL REQUEST (final wrap-up): Please approve the final PR wrap-up commit.`
- Agents must not merge branches under any circumstances.

## Architectural (backend-go-hex)

- Service behavior must be defined at explicit boundaries (ports/handlers) and tested at those boundaries.
- Domain and application logic must not depend on transport frameworks (HTTP, gRPC) or persistence implementations.
- Ports (interfaces) are defined inward (domain/application) and implemented outward (adapters).
- Adapters must be isolated; infrastructure/framework code must not leak into domain logic.
- Dependency wiring must occur only in the composition root.

## Documentation (backend-go-hex)

- Architectural decisions affecting system shape or long-term constraints must be captured as MADRs/ADRs.
<!-- GOV:END id=doc-non-negotiables -->

## Local Addenda (project-owned)

<!-- Project-owned notes, exceptions, and platform-specific adaptations go here. -->
